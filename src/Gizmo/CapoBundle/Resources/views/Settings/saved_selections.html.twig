{% extends 'GizmoCapoBundle::base.html.twig' %}
{% block subtitle %} - settings - saved selections{% endblock %}

{% block contents %}
<div class="row-fluid">
    <div id="error_container"></div>
    <div class="well well-large" id="search_box">
        {% if data.user_has_access %}
        <ul class="nav nav-tabs">
            <li class="active"><a href="{{ path('gizmo_capo_settings_saved_selections') }}">Saved selections</a></li>
            {% if data.user_is_admin %}
            <li class="pull-right"><a href="{{ path('gizmo_capo_settings_event_log') }}">Event log</a></li>
            <li class="pull-right"><a href="{{ path('gizmo_capo_settings_cacti_instances') }}">Cacti instances</a></li>
            <li class="pull-right"><a href="{{ path('gizmo_capo_settings_groups') }}">Groups</a></li>
            <li class="pull-right"><a href="{{ path('gizmo_capo_settings_users') }}">Users</a></li>
            {% endif %}
        </ul>
        <div class="container pull-left">
            <form class="form-horizontal">
            <input type="hidden" class="bigdrop saved_selections_select" id="saved_selections_select"/>
                <div class="input-append">
                    <input type="text" id="graph-selection-new-name" placeholder="New name">
                    <a class="btn" id="btn-rename-graph-selection">Rename</a>
                </div>
            </form>
        </div>
        <div class="container" id="saved_selections_actions">
            <a class="btn btn-danger" style="margin-left: 25px;" id="btn_delete_saved_selection"><i class="icon-remove icon-white"></i> delete graph selection</a>
        </div>
        <div id="results" class="settings">
            <table class="table table-hover">
                <thead>
                    <tr><th class="cacti-instance">Cacti Instance</th><th class="Graph">Graph</th></tr>
                </thead>
                <tbody id="results_list">
                    <tr><td class="cacti-instance"></td><td class="graph"></td></tr>
                </tbody>
            </table>
        </div>
        <p class="muted" id="result_count"></p>
        {% else %}
            <div style="text-align: center;">
            <h4 class="error">Successfully logged in, but your group does not have access to any Cacti instances yet.</h4>
            </div>
        {% endif %}
    </div><!-- /.well -->
</div><!-- /.row-fluid -->
{% endblock %}

{% block bottom %}
{% javascripts filter=''
'bundles/gizmocapo/js/capo.settings.saved_selections.js'
%}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}

<script>
    $(document).ready(function() {
        var cfg = {
            'base_url': '{{ app.request.baseUrl }}/'
        };

        CAPO.init(cfg);
        CAPO.settings.saved_selections.init();
    });
</script>
{% endblock %}
